CC ?= gcc
CFLAGS ?= -O2 -Wall -Wextra -std=c11
INCLUDES := -Iheaders
SRCS := main.c mathutils.c utils.c
OBJS := main.o mathutils.o utils.o
TARGET := main

all: $(TARGET)

$(TARGET): $(OBJS)
	$(CC) $(OBJS) -o $@ $(LDFLAGS)

%.o: %.c
	$(CC) $(CFLAGS) $(INCLUDES) -c $< -o $@

# Dependencies generated by gcc -MM
main.o: main.c headers/utils.h headers/mathutils.h
mathutils.o: mathutils.c headers/mathutils.h
utils.o: utils.c headers/utils.h

.PHONY: all clean
clean:
	rm -f $(OBJS) $(TARGET)

.PHONY: run
run: $(TARGET)
	./$(TARGET)
